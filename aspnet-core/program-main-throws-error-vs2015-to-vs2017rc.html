<!DOCTYPE html>
<html lang="en-US" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
		<title>Error on start after ASP.NET Core project upgraded from Visual Studio 2015 to Visual Studio 2017 RC,ASP.NET Core Console Application,ASP.NET Core Web Application</title>
		<link rel="shortcut icon" href="/wwwroot/favicon.ico" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="language" content="en" />
		<meta name="keywords" content=".NET CORE,ASP.NET Core,Visual Studio 2017 RC,VS2017RC,VS2017,ASP.NET Core Project,launchSettings.json" />
		<meta name="description" content="Error on every start after ASP.NET Core project upgraded from Visual Studio 2015 to Visual Studio 2017 RC" />
		<meta name="author" content="Adrien Torris" />
		<meta name="robots" content="index,follow" />
		<meta name="generator" content="No404! 0.1" />
		<!--<link rel="alternate" href="https://adrientorris.github.io/aspnet-core/program-main-throws-error-vs2015-to-vs2017rc.html" hreflang="en-en" /><link rel="canonical" href="https://adrientorris.github.io/aspnet-core/program-main-throws-error-vs2015-to-vs2017rc.html" />-->
		<link href="/wwwroot/css/style.css" rel="stylesheet" />
	</head>
	<body>
		<div id="main_ctn" class="post_ctn">
			<header>
				<div id="header-content">
					<h2>Blog</h2>
				</div>
			</header>
			<div id="arianne_wrapper">
				<ul>
					<li><a href="https://adrientorris.github.io/index.html" title="">Home</a></li>
					<li>ASP.NET Core</li>
					<li class="active"><a href="https://adrientorris.github.io/aspnet-core/program-main-throws-error-vs2015-to-vs2017rc.html" title="Error on every start after ASP.NET Core project upgraded from Visual Studio 2015 to Visual Studio 2017 RC">Error on start after ASP.NET Core project upgraded from Visual Studio 2015 to Visual Studio 2017 RC</a></li>
				</ul>
			</div>
			<div id="post_ctn">
				<h1>Error on start after ASP.NET Core project upgraded from Visual Studio 2015 to Visual Studio 2017 RC</h1>
				<p>After upgraded an ASP.NET Core Web Application project from Visual Studio 2015 to the new Visual Studio 2017 RC, I've got an error in every start before Program.Main gets hit, with a dialog show the error message :</p>
				<p><i>Object reference not set to an instance of an object.</i></p>
				<p>Once I've clicked on the OK button, the execution continues and Program.Main was call normally.</p>
				<p>The problem is a bug in the upgrade tools of Visual Studio 2017 RC, who doesn't handle a modification in the format of the <span class="thnclwrd">Properties/launchSettings.json</span> file.</p>
				<p>In Visual Studio 2015, this file looks like :</p>
<pre><code class="csharp">
{
  "iisSettings": {
    "windowsAuthentication": false,
    "anonymousAuthentication": true,
    "iisExpress": {
      "applicationUrl": "http://localhost:15174/",
      "sslPort": 0
    }
  },
  "profiles": {
    "IIS Express": {
      "commandName": "IISExpress",
      "launchBrowser": true,
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "WebApplication2": {
      "commandName": "Project",
      "launchBrowser": true,
      "launchUrl": "http://localhost:5000/home",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}
</code></pre>
				<p>In Visual Studio 2017 RC, you have to add the node <span class="thnclwrd">applicationUrl</span> in your profile. It's become :</p>
<pre><code class="csharp">
    "WebApplication2": {
      "commandName": "Project",
      "launchBrowser": true,
      "launchUrl": "home",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
      "applicationUrl": "http://localhost:15174"
    }
</code></pre>
				<div id="crdny">
					16/12/2016
				</div>
				<div id="tags_wrapper">
					<ul>
						<li>ASP.NET Core</li>
						<li>launchSettings.json</li>
						<li>Visual Studio 2017 RC</li>
					</ul>
				</div>
				<div id="refs_wrapper">
					<ul>
						<li><a href="https://www.visualstudio.com/en-us/news/releasenotes/vs2017-relnotes" title="Visual Studio 2017 RC release notes" target="_blank">Visual Studio 2017 RC release notes</a></li>
						<li><a href="https://github.com/aspnet/Tooling/blob/master/known-issues-vs2017.md" title="Known issues for ASP.NET and Web Tools in Visual Studio 2017" target="_blank">Known issues for ASP.NET and Web Tools in Visual Studio 2017</a></li>
					</ul>
				</div>
            </div>
			<footer>
			</footer>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
		<script src="/wwwroot/js/Infra.js" type="text/javascript"></script>
		<link type="text/css" rel="stylesheet" href="/wwwroot/lib/highlight/styles/vs.css" />
		<script type="text/javascript" src="/wwwroot/lib/highlight/highlight.pack.js"></script>
		<script type="text/javascript">hljs.initHighlightingOnLoad();</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85948839-1', 'auto');
  ga('send', 'pageview');

</script>
	</body>
</html>